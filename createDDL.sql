CREATE TABLE TOPIC (ID INTEGER AUTO_INCREMENT NOT NULL, CREATE_TIME DATETIME, DESCRIPTION VARCHAR(1000), MAINNAME VARCHAR(500) NOT NULL, OUTSIDER VARCHAR(500), PASSSTATUS VARCHAR(45) NOT NULL, SUBNAME VARCHAR(500) NOT NULL, TEACHER_COMMENT VARCHAR(1000), TOPICTYPE VARCHAR(30) NOT NULL, UPDATE_TIME DATETIME, STUDENT INTEGER, PRIMARY KEY (ID))
CREATE TABLE USER (ID INTEGER AUTO_INCREMENT NOT NULL, ROLE VARCHAR(31), ACCOUNT VARCHAR(45) NOT NULL, CREATE_TIME DATETIME, EMAIL VARCHAR(1000), GENDER VARCHAR(45), GPA VARCHAR(45), NAME VARCHAR(45) NOT NULL, PASSWORD VARCHAR(45) NOT NULL, PHONE VARCHAR(1000), SELF_DESCRIPTION VARCHAR(1000), UPDATE_TIME DATETIME, MATCH_LEVEL VARCHAR(30), MATCH_TYPE VARCHAR(30), TEACHER INTEGER, CANDIDATE_TOPICS VARCHAR(1000), CAPACITY INTEGER, DEGREE VARCHAR(45), DIRECTION VARCHAR(500), TITLE VARCHAR(45), PRIMARY KEY (ID))
CREATE TABLE MENU (ID INTEGER AUTO_INCREMENT NOT NULL, NAME VARCHAR(45) NOT NULL, PARENTID INTEGER, ROLE VARCHAR(45) NOT NULL, URL VARCHAR(2000) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE WILL (ID INTEGER AUTO_INCREMENT NOT NULL, CREATE_TIME DATETIME, LEVEL INTEGER NOT NULL, STATUS VARCHAR(10) NOT NULL, UPDATE_TIME DATETIME, STUDENT_ID INTEGER NOT NULL, TEACHER_ID INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TIME_NODE (ID INTEGER AUTO_INCREMENT NOT NULL, CREATE_TIME DATETIME, DESCRIPTION VARCHAR(500) NOT NULL, NAME VARCHAR(100) NOT NULL, TIME DATETIME NOT NULL, TYPE VARCHAR(30) NOT NULL, UPDATE_TIME DATETIME, PRIMARY KEY (ID))
CREATE TABLE DOCUMENT_COMMENT (ID INTEGER AUTO_INCREMENT NOT NULL, CONTENT VARCHAR(2000), CREATE_TIME DATETIME, UPDATE_TIME DATETIME, PARENT_DOCUMENT INTEGER NOT NULL, USER INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ATTACHMENT (ID INTEGER AUTO_INCREMENT NOT NULL, CREATE_TIME DATETIME, FINALVERSION TINYINT(1) default 0 NOT NULL, LISTNAME VARCHAR(500) NOT NULL, REALNAME VARCHAR(500) NOT NULL, SIZE VARCHAR(100) NOT NULL, STATUS VARCHAR(10) NOT NULL, UPDATE_TIME DATETIME, URL VARCHAR(1500) NOT NULL, CREATOR INTEGER NOT NULL, DOCUMENT INTEGER, SYSTEM_MESSAGE INTEGER, PRIMARY KEY (ID))
CREATE TABLE DOCUMENT (ID INTEGER AUTO_INCREMENT NOT NULL, CONTENT VARCHAR(5000), CREATE_TIME DATETIME, DOCUMENTSTATUS VARCHAR(40) NOT NULL, DOCUMENTTYPE VARCHAR(40) NOT NULL, NAME VARCHAR(45) NOT NULL, UPDATE_TIME DATETIME, CREATOR INTEGER NOT NULL, LAST_MODIFIED_BY INTEGER, PRIMARY KEY (ID))
CREATE TABLE ACTION_EVENT (ID INTEGER AUTO_INCREMENT NOT NULL, CREATE_TIME DATETIME, DESCRIPTION VARCHAR(300), UPDATE_TIME DATETIME, ACTOR INTEGER, LISTENER INTEGER, PRIMARY KEY (ID))
CREATE TABLE SYSTEM_MESSAGE (ID INTEGER AUTO_INCREMENT NOT NULL, CONTENT VARCHAR(5000), CREATE_TIME DATETIME, TITLE VARCHAR(500), UPDATE_TIME DATETIME, PRIMARY KEY (ID))
CREATE TABLE ACCESS_RULE (ID INTEGER AUTO_INCREMENT NOT NULL, CREATE_TIME DATETIME, MENU_NAME VARCHAR(50) NOT NULL, ROLE VARCHAR(100) NOT NULL, UPDATE_TIME DATETIME, URL VARCHAR(500) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TIMENODE_ACCESSRULE (TIME_NODE_ID INTEGER NOT NULL, ACCESS_RULE_ID INTEGER NOT NULL, PRIMARY KEY (TIME_NODE_ID, ACCESS_RULE_ID))
ALTER TABLE TOPIC ADD CONSTRAINT FK_TOPIC_STUDENT FOREIGN KEY (STUDENT) REFERENCES USER (ID)
ALTER TABLE USER ADD CONSTRAINT FK_USER_TEACHER FOREIGN KEY (TEACHER) REFERENCES USER (ID)
ALTER TABLE WILL ADD CONSTRAINT FK_WILL_TEACHER_ID FOREIGN KEY (TEACHER_ID) REFERENCES USER (ID)
ALTER TABLE WILL ADD CONSTRAINT FK_WILL_STUDENT_ID FOREIGN KEY (STUDENT_ID) REFERENCES USER (ID)
ALTER TABLE DOCUMENT_COMMENT ADD CONSTRAINT FK_DOCUMENT_COMMENT_PARENT_DOCUMENT FOREIGN KEY (PARENT_DOCUMENT) REFERENCES DOCUMENT (ID)
ALTER TABLE DOCUMENT_COMMENT ADD CONSTRAINT FK_DOCUMENT_COMMENT_USER FOREIGN KEY (USER) REFERENCES USER (ID)
ALTER TABLE ATTACHMENT ADD CONSTRAINT FK_ATTACHMENT_CREATOR FOREIGN KEY (CREATOR) REFERENCES USER (ID)
ALTER TABLE ATTACHMENT ADD CONSTRAINT FK_ATTACHMENT_DOCUMENT FOREIGN KEY (DOCUMENT) REFERENCES DOCUMENT (ID)
ALTER TABLE ATTACHMENT ADD CONSTRAINT FK_ATTACHMENT_SYSTEM_MESSAGE FOREIGN KEY (SYSTEM_MESSAGE) REFERENCES SYSTEM_MESSAGE (ID)
ALTER TABLE DOCUMENT ADD CONSTRAINT FK_DOCUMENT_CREATOR FOREIGN KEY (CREATOR) REFERENCES USER (ID)
ALTER TABLE DOCUMENT ADD CONSTRAINT FK_DOCUMENT_LAST_MODIFIED_BY FOREIGN KEY (LAST_MODIFIED_BY) REFERENCES USER (ID)
ALTER TABLE ACTION_EVENT ADD CONSTRAINT FK_ACTION_EVENT_ACTOR FOREIGN KEY (ACTOR) REFERENCES USER (ID)
ALTER TABLE ACTION_EVENT ADD CONSTRAINT FK_ACTION_EVENT_LISTENER FOREIGN KEY (LISTENER) REFERENCES USER (ID)
ALTER TABLE TIMENODE_ACCESSRULE ADD CONSTRAINT FK_TIMENODE_ACCESSRULE_TIME_NODE_ID FOREIGN KEY (TIME_NODE_ID) REFERENCES TIME_NODE (ID)
ALTER TABLE TIMENODE_ACCESSRULE ADD CONSTRAINT FK_TIMENODE_ACCESSRULE_ACCESS_RULE_ID FOREIGN KEY (ACCESS_RULE_ID) REFERENCES ACCESS_RULE (ID)
